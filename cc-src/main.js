require('./prime_search')().then(Module => {
    console.log("init");
    const input =
        `12445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333343333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333343333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333343333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333343333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999112445678987652345678765433433333333333333333333333111111111119999122`;
    // TODO: allocate more memory
    const buffer = Module._malloc(input.length + 1);
    Module.stringToUTF8(input, buffer, input.length + 1);
    Module._find_candidate(buffer, 10);
    console.log(`done, result = ${Module.UTF8ToString(buffer)}`);
    Module._free(buffer);
});
